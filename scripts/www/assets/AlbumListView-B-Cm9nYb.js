import"./Request-Drn82gJH.js";/* empty css                     */import{g as L}from"./MediaApi-DU0bZU-c.js";import{g as P,c as j,o as T}from"./AlbumApi-CFDiwMIg.js";import{_ as J,o as O,r as _,c as v,a,b as l,d as C,e as k,w as n,E as G,F as H,f as K,u as m,g as Q,h as W,i as c,j as r,k as X,l as Y,m as Z,t as f,n as A,p as ee,q as te,s as oe,v as le,x as ne,y as E,z as se,A as b}from"./index-BnVgF_wZ.js";const ae={style:{padding:"20px"}},ue={class:"header"},ie={class:"top-area"},re={class:"albums-container"},de=["onClick"],me={class:"album-cover"},ce=["src","alt"],pe={class:"album-info"},_e={class:"album-title"},ve={class:"album-meta"},fe={class:"album-description"},be={key:0,class:"media-actions"},ge=["onClick"],ke=["onClick"],we={__name:"AlbumListView",setup(ye){O(()=>{I()});const F=()=>{const t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},I=()=>{P().then(t=>{t.code===200&&(s.value=t.data,w.value=t.data)})},q=()=>{j(i.value.name,i.value.description).then(t=>{t.code===200?(b.success("创建成功"),p.value=!1,i.value.name="",i.value.description="",s.value.unshift(t.data)):b.error(t.message)})},D=t=>t===null||t===""?"/common_poster.jpeg":L(t),s=_([]),w=_([]),M=t=>{const e={year:"numeric",month:"long",day:"numeric"};return new Date(t).toLocaleDateString("zh-CN",e)},R=t=>{se.push({name:"AlbumView",query:{album:encodeURIComponent(JSON.stringify(t))}})},p=_(!1),i=_({name:"",description:""}),d=_(!1),U=t=>{const e=s.value.findIndex(u=>u.albumId===t.albumId);if(e>0){const u=s.value[e-1];s.value[e-1]=s.value[e],s.value[e]=u}},h=t=>{const e=s.value.findIndex(u=>u.albumId===t.albumId);if(e<s.value.length-1){const u=s.value[e+1];s.value[e+1]=s.value[e],s.value[e]=u}},B=()=>{d.value=!1},N=()=>{d.value=!1;const t=s.value.map(e=>e.albumId);T(t).then(e=>{e.code===200?(b.success("排序成功"),w.value=s.value):b.error(e.message)})};return(t,e)=>{const u=W,g=Z,S=Y,$=G,y=te,x=ne,z=le;return c(),v("div",ae,[a("div",ue,[a("div",ie,[e[11]||(e[11]=a("h2",{style:{margin:"10px 0 15px 0"}},"Picture",-1)),a("div",null,[d.value?(c(),C(u,{key:0,type:"success",onClick:N,style:{"margin-right":"10px"}},{default:n(()=>e[6]||(e[6]=[r(" 确认 ")])),_:1,__:[6]})):k("",!0),d.value?(c(),C(u,{key:1,type:"primary",onClick:B,style:{"margin-right":"10px"}},{default:n(()=>e[7]||(e[7]=[r(" 取消 ")])),_:1,__:[7]})):k("",!0),l($,{placement:"bottom-end"},{dropdown:n(()=>[l(S,null,{default:n(()=>[l(g,{onClick:e[0]||(e[0]=o=>p.value=!0)},{default:n(()=>e[8]||(e[8]=[r("创建相册")])),_:1,__:[8]}),l(g,{onClick:e[1]||(e[1]=o=>d.value=!0)},{default:n(()=>e[9]||(e[9]=[r("相册排序")])),_:1,__:[9]}),l(g,{onClick:F},{default:n(()=>e[10]||(e[10]=[r("全屏预览")])),_:1,__:[10]})]),_:1})]),default:n(()=>[l(u,{icon:m(X),plain:"",type:"primary"},null,8,["icon"])]),_:1})])])]),a("div",re,[(c(!0),v(H,null,K(s.value,o=>(c(),v("div",{key:o.id,class:"album-card fade-in",onClick:V=>R(o)},[a("div",me,[a("img",{src:D(o.poster),alt:o.name},null,8,ce)]),a("div",pe,[a("h3",_e,f(o.name),1),a("div",ve,[a("span",null,f(o.count)+" 片",1),a("span",null,f(M(o.createTime)),1)]),a("p",fe,f(o.description),1)]),d.value?(c(),v("div",be,[a("div",{class:"action-button",onClick:A(V=>U(o),["stop"])},[l(y,{color:"red"},{default:n(()=>[l(m(ee))]),_:1})],8,ge),a("div",{class:"action-button",onClick:A(V=>h(o),["stop"])},[l(y,{color:"blue"},{default:n(()=>[l(m(oe))]),_:1})],8,ke)])):k("",!0)],8,de))),128))]),l(m(Q),{style:{width:"90%","max-width":"600px"},modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=o=>p.value=o),title:"编辑相册"},{footer:n(()=>[l(u,{onClick:e[4]||(e[4]=o=>p.value=!1)},{default:n(()=>e[12]||(e[12]=[r("取消")])),_:1,__:[12]}),l(u,{type:"primary",onClick:q},{default:n(()=>e[13]||(e[13]=[r("保存")])),_:1,__:[13]})]),default:n(()=>[l(z,{"label-width":"80px"},{default:n(()=>[l(x,{label:"相册名称"},{default:n(()=>[l(m(E),{modelValue:i.value.name,"onUpdate:modelValue":e[2]||(e[2]=o=>i.value.name=o)},null,8,["modelValue"])]),_:1}),l(x,{label:"相册描述"},{default:n(()=>[l(m(E),{modelValue:i.value.description,"onUpdate:modelValue":e[3]||(e[3]=o=>i.value.description=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Fe=J(we,[["__scopeId","data-v-094f5a28"]]);export{Fe as default};
